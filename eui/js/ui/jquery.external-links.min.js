(function(a){a.fn.external_links=function(b){var e=a.extend({add_rel:true,new_window:true,add_class:true,add_title:true,hostname:location.hostname,external_title:"This link opens in a new window",class_name:"external",local_domain_arr:[],new_window_callback:c},b);function c(){window.open(this.href);return false}function d(f){re=/^(https?:\/\/)([^\/]+).*\/?$/i;a(e.local_domain_arr).each(function(h,g){e.local_domain_arr[h]=g.replace(re,"$2")});return f.each(function(){var i=a(this);var g=false;var h=false;if(typeof i.not("[href^=javascript]")[0]!=="undefined"){h=true}if(h===true){if(i.attr("rel")==="external"){g=true}if(g===false&&i[0].hostname!==e.hostname){if(e.local_domain_arr.length>0){if(a.inArray(i[0].hostname,e.local_domain_arr)===-1){g=true}}else{g=true}}if(g===true){if(e.add_rel===true){i.attr("rel","external")}if(e.add_class===true){i.addClass(e.class_name)}if(e.add_title===true){i.attr("title",e.external_title)}if(e.new_window===true){i.click(e.new_window_callback)}}}})}return d(this)}})(jQuery);